<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ESTEVE 2.0 - UNIVERSAL</title>
    <style>
        :root { --p: #f39c12; --bg: #0f0f0f; --card: #1a1a1a; --text: #e0e0e0; }
        body { font-family: sans-serif; background: var(--bg); color: var(--text); padding: 15px; margin: 0; }
        .card { background: var(--card); padding: 15px; border-radius: 12px; margin-bottom: 15px; border-left: 4px solid var(--p); }
        h3 { color: var(--p); margin: 0 0 10px 0; font-size: 1.1em; text-transform: uppercase; }
        label { display: block; font-size: 0.8em; color: #888; margin-top: 10px; }
        input, select, textarea { width: 100%; padding: 12px; margin-top: 5px; background: #252525; border: 1px solid #333; color: #fff; border-radius: 8px; box-sizing: border-box; }
        button { width: 100%; padding: 15px; background: var(--p); border: none; color: #000; font-weight: bold; border-radius: 8px; margin-top: 15px; cursor: pointer; font-size: 1.1em; }
        .res-box { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #333; font-size: 0.9em; }
        .val { color: #2ecc71; font-weight: bold; }
        .seccion-titulo { color: #f39c12; font-weight: bold; margin-top: 15px; border-bottom: 1px solid #444; display: block; font-size: 0.9em; text-align: center; background: #222; padding: 5px; }
    </style>
</head>
<body>
<div class="card">
    <h3>üèóÔ∏è DATOS DE INSTALACI√ìN</h3>
    <label>Nombre de Obra</label><input type="text" id="obra" placeholder="Ej: Casa Juan o Nave Esteve">
    <div style="display:flex; gap:10px;">
        <div style="flex:1;"><label>N¬∫ Placas</label><input type="number" id="nP" value="10"></div>
        <div style="flex:1;"><label>Potencia (kW)</label><input type="number" id="pI" value="5"></div>
    </div>
    <div style="display:flex; gap:10px;">
        <div style="flex:1;"><label>Mts AC (Tubo)</label><input type="number" id="mAC" value="10"></div>
        <div style="flex:1;"><label>Mts DC (Canaleta)</label><input type="number" id="mDC" value="15"></div>
    </div>
</div>

<button onclick="calcular()">CALCULAR PEDIDO T√âCNICO</button>
<div id="resultado"></div>
<button id="wa-btn" style="display:none; background:#25d366; color:white;" onclick="enviar()">üì§ ENVIAR ALMAC√âN</button>

<script>
    function calcular() {
        const pI = parseFloat(document.getElementById('pI').value);
        const nP = parseInt(document.getElementById('nP').value);
        const mAC = parseFloat(document.getElementById('mAC').value);
        const mDC = parseFloat(document.getElementById('mDC').value);

        // 1. Perfiles: 2.3m por cada 2 placas (y redondeamos hacia arriba por retales)
        const metrosPerfil = Math.ceil((nP / 2) * 2.3);
        
        // 2. Grapas: 1 cada 1.5 metros de canalizaci√≥n total
        const grapas = Math.ceil((mAC + mDC) / 1.5);
        
        // 3. L√≥gica El√©ctrica Autom√°tica
        let mag, dif;
        if (pI < 10) {
            mag = "2P 25A"; dif = "2P 40A Clase A"; // Vivienda est√°ndar
        } else if (pI >= 10 && pI < 30) {
            mag = "4P 40A"; dif = "4P 40A Clase A"; // Trif√°sica peque√±a
        } else {
            mag = "4P 100A"; dif = "4P 100A Clase A"; // Gran Industria
        }
        
        const escuadras = (Math.ceil(((1.13 * nP) + 0.30) / 1.3) + 1) * 2;

        document.getElementById('resultado').innerHTML = `
            <div class="card">
                <span class="seccion-titulo">‚ö° ALTERNATING (AC)</span>
                <div class="res-box"><span>Magnetot√©rmico:</span><span class="val">${mag}</span></div>
                <div class="res-box"><span>Diferencial:</span><span class="val">${dif}</span></div>
                <div class="res-box"><span>Metros de Tubo:</span><span class="val">${mAC} m</span></div>
                
                <span class="seccion-titulo">‚òÄÔ∏è CONTINUOUS (DC)</span>
                <div class="res-box"><span>Potencia Inversor:</span><span class="val">${pI} kW</span></div>
                <div class="res-box">
