<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ESTEVE 2.0 - Ingenier√≠a y Suministros</title>
    <style>
        :root { --p: #f39c12; --bg: #0f0f0f; --card: #1a1a1a; --text: #e0e0e0; }
        body { font-family: sans-serif; background: var(--bg); color: var(--text); padding: 15px; margin: 0; }
        .header { text-align: center; padding: 10px; border-bottom: 2px solid var(--p); margin-bottom: 20px; }
        .card { background: var(--card); padding: 15px; border-radius: 12px; margin-bottom: 15px; border-left: 4px solid var(--p); }
        h3 { color: var(--p); margin: 0 0 10px 0; font-size: 1.1em; text-transform: uppercase; }
        label { display: block; font-size: 0.8em; color: #888; margin-top: 10px; }
        input, select { width: 100%; padding: 12px; margin-top: 5px; background: #252525; border: 1px solid #333; color: #fff; border-radius: 8px; box-sizing: border-box; }
        button { width: 100%; padding: 15px; background: var(--p); border: none; color: #000; font-weight: bold; border-radius: 8px; margin-top: 15px; cursor: pointer; font-size: 1.1em; }
        .res-box { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #2a2a2a; font-size: 0.9em; }
        .val { color: #2ecc71; font-weight: bold; }
        #wa-btn { background: #25d366; color: #fff; display:none; }
        .seccion-titulo { color: #f39c12; font-weight: bold; margin-top: 15px; border-bottom: 1px solid #f39c12; display: block; }
    </style>
</head>
<body>
<div class="header"><h1>ESTEVE 2.0</h1></div>

<div class="card">
    <h3>üèóÔ∏è Datos de Estructura</h3>
    <label>Nombre de la Obra</label><input type="text" id="obra" placeholder="Ej: Nave Industrial">
    <div style="display:flex; gap:10px;">
        <div style="flex:1;"><label>N¬∫ Placas</label><input type="number" id="nP" value="10"></div>
        <div style="flex:1;"><label>N¬∫ Filas</label><input type="number" id="nF" value="1"></div>
    </div>
    <div style="display:flex; gap:10px;">
        <div style="flex:1;"><label>Ancho Placa (m)</label><input type="number" id="aP" step="0.01" value="1.13"></div>
        <div style="flex:1;"><label>Tipo Tejado</label><select id="tejado"><option value="Bovedilla">Bovedilla (Qu√≠mico)</option><option value="Sandwich">Sandwich (Autoroscante)</option></select></div>
    </div>
</div>

<div class="card">
    <h3>üîå Datos El√©ctricos</h3>
    <div style="display:flex; gap:10px;">
        <div style="flex:1;"><label>Pot. Inv (kW)</label><input type="number" id="pI" value="5"></div>
        <div style="flex:1;"><label>Fases</label><select id="fases"><option value="1">Monof√°sico</option><option value="3">Trif√°sico</option></select></div>
    </div>
    <div style="display:flex; gap:10px;">
        <div style="flex:1;"><label>M. Alterna (AC)</label><input type="number" id="mAC" value="10"></div>
        <div style="flex:1;"><label>M. Continua (DC)</label><input type="number" id="mDC" value="20"></div>
    </div>
</div>

<button onclick="calcular()">GENERAR LISTADO COMPLETO</button>
<div id="resultado"></div>
<button id="wa-btn" onclick="enviar()">üì§ ENVIAR ALMAC√âN POR WHATSAPP</button>

<script>
    let msg = "";
    function calcular() {
        const obra = document.getElementById('obra').value || "Sin nombre";
        const nP = parseInt(document.getElementById('nP').value);
        const nF = parseInt(document.getElementById('nF').value);
        const aP = parseFloat(document.getElementById('aP').value);
        const pI = parseFloat(document.getElementById('pI').value);
        const fases = parseInt(document.getElementById('fases').value);
        const mAC = parseFloat(document.getElementById('mAC').value);
        const mDC = parseFloat(document.getElementById('mDC').value);
        const tejado = document.getElementById('tejado').value;

        // C√ÅLCULOS ESTRUCTURA
        const mFila = (aP * (nP/nF)) + (0.02 * ((nP/nF)-1)) + 0.20;
        const mTotal = mFila * 2 * nF;
        const fijaciones = (Math.ceil(mFila/1.3)+1)*2*nF; // Fijaci√≥n cada 1.3m aprox
        
        // TORNILLER√çA
        const arandelas = fijaciones * 2;
        const growers = fijaciones;
        const tuercas = fijaciones;
        const tamices = tejado === "Bovedilla" ? fijaciones : 0;
        const botesQuimico = tejado === "Bovedilla" ? Math.ceil(fijaciones / 8) : 0;
        const autoroscantes = tejado === "Sandwich" ? fijaciones * 4 : 0;

        // CANALIZACI√ìN (1 grapa cada 1.5m)
        const totalMetros = mAC + mDC;
        const grapasMet = Math.ceil(totalMetros / 1.5);
        const tornillosTacos = grapasMet;

        // EL√âCTRICO
        const amp = (pI * 1000) / (fases === 3 ? 692 : 230);
        let cable = amp < 25 ? 6 : amp < 40 ? 10 : 16;
        let mag = amp < 16 ? 16 : amp < 20 ? 20 : amp < 25 ? 25 : amp < 32 ? 32 : 40;

        document.getElementById('resultado').innerHTML = `
            <div class="card" style="border-left-color: #2ecc71">
                <span class="seccion-titulo">üèóÔ∏è ESTRUCTURA Y FIJACI√ìN</span>
                <div class="res-box"><span>Perfil:</span><span class="val">${mTotal.toFixed(2)}m</span></div>
                <div class="res-box"><span>Escuadras/Arranques:</span><span class="val">${fijaciones} uds</span></div>
                ${tejado === "Bovedilla" ? `
                    <div class="res-box"><span>Taco Qu√≠mico:</span><span class="val">${botesQuimico} botes</span></div>
                    <div class="res-box"><span>Tamices:</span><span class="val">${tamices} uds</span></div>
                ` : `
                    <div class="res-box"><span>Autoroscantes:</span><span class="val">${autoroscantes} uds</span></div>
                `}
                <div class="res-box"><span>Arandelas / Growers:</span><span class="val">${arandelas} / ${growers}</span></div>
                
                <span class="seccion-titulo">üîå PROTECCIONES Y CABLE</span>
                <div class="res-box"><span>Magneto / Dif:</span><span class="val">${fases}P ${mag}A / Clase A</span></div>
                <div class="res-box"><span>Secci√≥n Cable:</span><span class="val">${cable}mm¬≤</span></div>
                
                <span class="seccion-titulo">üóÑÔ∏è CANALIZACI√ìN</span>
                <div class="res-box"><span>Grapas Met√°licas:</span><span class="val">${grapasMet} uds</span></div>
                <div class="res-box"><span>Tornillos + Tacos:</span><span
